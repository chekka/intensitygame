(window.webpackJsonp=window.webpackJsonp||[]).push([[6,25],{244:function(e,t,n){"use strict";var r=n(0),a=n(3),c=n(5),o=n(10);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t={title:Object(a.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(a.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(a.__)("Upgrade to PRO Now","funnel-builder"),proLink:window.wffn.pro_link,action:!1},n=e.onRequestClose,l=e.isOpen,u=e.children,s=void 0===u?null:u,f=e.modalContent?i(i({},t),e.modalContent):t;return l?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(r.createElement)(o.a,{icon:"lock",size:20}),f.title),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(a.__)("Close"),onClick:n},Object(r.createElement)(o.a,{icon:"close",weight:"16",height:"16"}))),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof f.content?f.content.replace("{{feature_name}}",f.feature):f.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},f.demoLabel&&Object(r.createElement)(c.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},f.demoLabel),!f.demoLabel&&Object(r.createElement)(c.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(a.__)("Cancel")),f.action?Object(r.createElement)(c.Button,{className:"components-button is-primary upgrade-btn",onClick:f.action},f.proLabel):Object(r.createElement)("a",{href:f.proLink,target:"_blank",rel:"noopener noreferrer",className:"components-button is-primary upgrade-btn"},f.proLabel)),s)):null};s.defaultProps={isOpen:!1,onRequestClose:function(){}},t.a=s},273:function(e,t,n){"use strict";var r=n(19),a=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return o(o({},i(e,a)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},410:function(e,t,n){"use strict";var r=n(20),a=n(8),c=["fetch","setStateProp"];function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("settings"),t=e.fetch,n=e.setStateProp;return l(l({},u(e,c)),{},{fetch:function(){t("GET",Object(a.f)("/woofunnels-admin/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)}})}},417:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n(3),o=n(73),l=n(95);function i(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(""),2),n=t[0],s=t[1],f=u(Object(r.useState)({}),2),p=f[0],m=f[1],b=u(Object(r.useState)(""),2),d=b[0],O=b[1],v=e.onCloseModal,j=e.onComplete,y=e.isWorking,_=e.modalTitle,g=void 0===_?Object(c.__)("Add Funnel","funnel-builder"):_;Object(r.useEffect)((function(){m({})}),[]);var w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return s("Funnel title is required field"),e.abrupt("return");case 3:s(""),j&&j(d);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){i(c,r,a,o,l,"next",e)}function l(e){i(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(a.Modal,{title:g,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return v()},isDismissible:!0,shouldCloseOnClickOutside:!y,overlayClassName:"bwf-create-funnel-modal__overlay"},n&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return s("")}},n),p&&p.error||p&&p.success?p&&p.success&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(o.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):p&&p.error&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):"":Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&w()}},Object(r.createElement)(a.TextControl,{placeholder:Object(c.__)("Enter funnel name","funnel-builder"),label:Object(c.__)("Name","funnel-builder"),value:d,onChange:function(e){return O(e)},disabled:y}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(a.Button,{onClick:v,className:"bwf-modal-cancel-btn",disabled:y},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(a.Button,{isPrimary:!0,disabled:y,isBusy:y,onClick:w,name:"add-funnel"},Object(c.__)(y?"Importing":"Add","funnel-builder")))))}},648:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(135),c=n(6),o=n(3),l=n(654),i=(n(85),n(97)),u=n(56),s=n(8),f=n(11);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={optin:{inline:"Inline",popup:"Popup"},wc_checkout:{1:"One Step",2:"Two Step",3:"Three Step"}};t.default=function(e){var t=Object(i.a)(),n=t.getTemplates,p=t.getBuilders,b=(t.getFilters,t.getDefaultBuilder),O=t.templateLoading,v=t.getActiveBuilder,j=t.getActiveSubFilter,y=t.getActiveGroup,_=(Object(u.a)().setActiveSubFilter,e.onImportComplete),g=e.isStoreCheckout,w=void 0!==g&&g,h=e.scratchConfirmModalData,E=e.storeCheckoutId,k=e.isStoreChekoutExists,S=void 0!==k&&k,N=e.templateListNotice,C=e.showImportNotice,P=Object(f.i)().importType,T=n(),I=p(),x=JSON.parse(JSON.stringify(I)),A=b(),R=v(),D=O(),B=j(),F=Object(a.d)(),L=F.id,U=void 0===L?0:L,q=F.filter,M=void 0===q?"funnel":q,z=F.builder,G=F.templateId,W=F.step,J=w&&E?E:U,$=y(),V=J||Object(s.w)()?$:M,K={wc_checkout:Object(o.__)("Store Checkout","funnel-builder"),landing:Object(o.__)("Sales Funnel","funnel-builder"),optin:Object(o.__)("Lead Generation Funnel","funnel-builder")};(J||S)&&delete K.wc_checkout,S&&(K.upsell&&delete K.upsell,J||(K.wc_checkout=Object(o.__)("Store Checkout","funnel-builder"))),Object(s.v)()||(K.upsell=Object(o.__)("One Click Upsell","funnel-builder")),x&&x.wc_checkout&&x.wc_checkout.customizer&&delete x.wc_checkout.customizer;var Y=function(){var e=z||A;return Object(c.isEmpty)(R)||(e=R),x&&x[V]&&!x[V][e]&&(e=x[V][A]?A:"elementor"),e},H=["1","2","3","inline","popup"],Q=function(e,t){return("wc_checkout"===t||"optin"===t)&&B&&H.includes(B)?T[t][R][e].group_type[B]:e},X=function(e,t,n){var r="";return"landing"===e?r="sp":"optin"===e?r="op":"optin_ty"===e?r="op-confirmed":"wc_checkout"===e?r="checkouts":"upsell"===e?r="offer":"wc_thankyou"===e&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Z=Object(s.w)()?"/store-checkout":J?"/funnels/".concat(J):"/templates";return Object(r.createElement)(l.a,{filters:d,templates:T,activeBuilder:Y(),templateCards:function(){if(Object(c.isEmpty)(T)||Object(c.isEmpty)([V]))return{};var e=Y(),t={};if("upsell"===V)t=T[V][e];else if("funnel"===V){var n=T[V][e];for(var r in n){var a,o=n[r];if(n[r].hasOwnProperty("group"))if(!(o.group.includes("sales")||o.group.includes("optin")||null!==(a=n[r])&&void 0!==a&&a.build_from_scratch))continue;t[r]=n[r]}}else for(var l in T.funnel[e]){var i=T.funnel[e][l];("landing"===V&&i.group.includes("sales")||"optin"===V&&i.group.includes("optin")||"wc_checkout"===V&&i.group.includes("wc_checkout"))&&(t[l]=i)}return t}(),editors:x,defaultBuilder:A,isTemplateLoading:D,activeTemplateGroup:V,templateGroup:K,previewData:function(){if(Object(c.isEmpty)(T))return{};var e={success:!0},t=[],n=[];try{var r=Y();if("upsell"===V){t=[];var a=r;for(var l in"oxy"===a&&(a="oxygen"),"customizer"===a&&(a="elementor"),T[V][r]){var i=T[V][r][l];if(!i.build_from_scratch){var u={};u.id=l,u.funnel=l,u.slug=l,u.name=i.name,u.thumbnail=i.thumbnail,u.template=G,u.pro=i.pro,u.preview="https://templates-".concat(a,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:l,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:G,thumbnail:G,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(T[V][r][G].prevslug,"/"),slug:G,prevId:G,name:T[V][r][G].name,pro:T[V][r][G].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(V){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=T.funnel[r][G];t=f.steps?f.steps.map((function(e){var t=T[e.type][r][Q(e.slug,e.type)],a="";switch(e.type){case"landing":a=Object(o.__)("Sales Page");break;case"wc_checkout":a=Object(o.__)("Checkout Page");break;case"upsell":a=Object(o.__)("One Click Upsell");break;case"wc_thankyou":a=Object(o.__)("Thank You Page");break;case"optin":a=Object(o.__)("Optin Page");break;case"optin_ty":a=Object(o.__)("Optin Confirmation Page")}t.group_type?Object.values(t.group_type).forEach((function(t){var a=T[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(a.prevslug),preview:X(e.type,a,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:X(e.type,t,r)});return{id:"".concat(e.type,"-").concat(G),slug:Q(e.slug,e.type),funnel:G,step:e.type,name:a,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:X(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var p=f?f.steps.filter((function(e){return e.type===W})):[],m=T[p[0].type][r][Q(p[0].slug,p[0].type)];e.activeTemplate={thumbnail:"".concat(W,"-").concat(G),prevId:"".concat(W,"-").concat(m.prevslug),preview:X(p[0].type,m,r),slug:G,name:T.funnel[r][G].name,pro:T.funnel[r][G].pro,tempPro:T.funnel[r][G].pro,group:"funnel",filters:!!m.group_type&&Object.keys(m.group_type),type:W,filter:"wc_checkout"===W?m.no_steps:m.group?m.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:J,onImportComplete:_,templateFilterCheck:function(e){return!J||"funnel"===P||!1===B||!1===B||!(!J||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===B?"optin":B):B===e.group)},activeFilter:B,isStoreCheckout:w,parentRoute:Z,showTemplatesNav:!Object(s.w)(),showBuildFromScratch:"funnel"!==P||w&&!J,funnelTitleModalData:m({},w&&{title:"Store Checkout"}),scratchConfirmModalData:h,importApiPrefix:w?"store-checkout":"funnels",templateListNotice:N,showImportNotice:C})}},654:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ce}));var r=n(0),a=n(6),c=n(9),o=n.n(c),l=n(7),i=n.n(l),u=n(135),s=n(3),f=n(5),p=n(15),m=n.n(p),b=n(11),d=(n(823),n(55));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,c,l=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,c=e.src,l=e.title,i=this.state.isLoading,u=o()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:u},(i||Object(a.isEmpty)(c))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:j({},Object(a.isEmpty)(c)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:l,src:c})))}}])&&_(t.prototype,n),c&&_(t,c),i}(r.Component);S.propTypes={className:i.a.string,loadingContent:i.a.node,onLoad:i.a.func,src:i.a.string.isRequired,title:i.a.string.isRequired},S.defaultProps={loadingContent:Object(r.createElement)(d.a,{size:"xxl"}),onLoad:a.noop};var N=S,C=n(244),P=n(10),T=n(82),I=n(63),x=n(56),A=n(97),R=(n(824),n(8)),D=(n(825),["src","onLoaded"]);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var q=function(e){var t=e.src,n=e.onLoaded,c=void 0===n?a.noop:n,o=U(e,D),l=F(Object(r.useState)(!1),2),i=l[0],u=l[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),c(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",B({src:t},o)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},M=n(17);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.wffn.pro_link;var Y=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},H=Y.logo?Y.logo:"";function Q(e){var t=e.isOpen,n=e.onRequestClose,c=(e.templateID,e.template,e.activeGroup),l=(e.importTemplate,e.activeEditor),i=e.importing,p=(e.templateList,e.templateGroup,e.filters),m=e.hasPRO,d=e.checkEditor,O=e.previewData,v=e.isTemplateLoading,j=e.activeFilter,y=e.setPreviewErr,_=e.parentRoute,g=e.funnelId,w=e.importType,h=Object(b.i)(),E=O(),k=E.thumbnails,S=E.activeTemplate,D=E.previews,B=void 0===D?[]:D,F=Object(u.d)().step,L=M.a.getFunnel(),U=!(!S||!S.type)&&S.type;Object(r.useEffect)((function(){g||(E.success?y(!1):!1===E.success&&y(!0))}),[E.success]),Object(r.useEffect)((function(){if(U)if("wc_checkout"===U||"optin"===U){var e=!(!S||!S.filters)&&S.filters[0];h.group&&("wc_checkout"===U&&["1","2","3"].includes(h.group)||"optin"===U&&["inline","popup"].includes(h.group))?z(h.group):(z(e),Object(b.k)({group:e}))}else h.group&&(delete h.group,Object(b.k)({},Object(b.g)(),h))}),[h.group,U]),Object(r.useEffect)((function(){!Object(a.isEmpty)(null==L?void 0:L.steps)&&"funnel"===w&&g&&Object(b.k)({},"/funnels/".concat(L.id))}),[L]);var z=Object(x.a)().setActiveSubFilter,W=(0,Object(A.a)().getCurrentTemplate)(),V=Object(x.a)().setCurrentTemplate,K=$(Object(r.useState)(!1),2),Y=(K[0],K[1]),Q=m("status"),X="upsell"===c||g&&"step"===w?Object(s.__)("Import This Template"):Object(s.__)("Import This Funnel"),Z=$(Object(r.useState)("desktop"),2),ee=Z[0],te=Z[1],ne=$(Object(r.useState)(!1),2),re=ne[0],ae=ne[1],ce=$(Object(r.useState)(!1),2),oe=ce[0],le=ce[1],ie=$(Object(r.useState)(!g),2),ue=ie[0],se=ie[1],fe=$(Object(r.useState)([]),2),pe=fe[0],me=fe[1];Object(r.useEffect)((function(){if(Y(!1),S&&!pe.includes(S.prevId)){var e=JSON.parse(JSON.stringify(pe));e.push(S.prevId),me(e)}}),[null==S?void 0:S.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(k&&!g&&ue){var e=k||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&se(!1)}}))}}),[k]);var be=("wc_checkout"===c||F&&"wc_checkout"===F)&&"1"!==j,de=("optin"===c||F&&"optin"===F)&&"inline"!==j;return E?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.Modal,{className:"wffn_template_preview_modal",onRequestClose:function(){return n(!1)},overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:H,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},null==S?void 0:S.name,"yes"===(null==S?void 0:S.pro)&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},"PRO"))),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"desktop"===ee}),onClick:function(){return te("desktop")},title:"Desktop Viewport"},Object(r.createElement)(P.a,{icon:"desktop",color:"desktop"===ee&&"#fff"})),Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"tablet"===ee}),onClick:function(){return te("tablet")},title:"Tablet Viewport"},Object(r.createElement)(P.a,{icon:"tablet",color:"tablet"===ee&&"#fff"})),Object(r.createElement)("span",{className:o()("wffn_viewport_icons",{active:"mobile"===ee}),onClick:function(){return te("mobile")},title:"Mobile Viewport"},Object(r.createElement)(P.a,{icon:"mobile",color:"mobile"===ee&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,m((null==S?void 0:S.pro)||"no")||!0!==Q&&(be||de||"upsell"===F)?Object(r.createElement)(f.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:function(){!1===Q&&"yes"!==(null==S?void 0:S.tempPro)&&(be||de||"upsell"===F)?le(!0):ae(!0)}},X):Object(r.createElement)(f.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:function(){d()},disabled:i&&i.group===c,isBusy:"funnel"===w&&g&&i&&i.group===c},"funnel"===w&&g&&i&&i.group===c?"Importing...":X))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(f.Button,{onClick:function(){g?Object(b.k)({},"".concat(_)):(Object(b.k)({},"".concat(_,"/").concat(c)),z(!1)),n()}},Object(r.createElement)(P.a,{icon:"close",size:"18"})))),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:o()("wffn_template_preview_inner wffn_funnel_preview")},function(){if(null!=S&&S.type){var e=p[null==S?void 0:S.type];if(void 0!==e&&!Object(a.isEmpty)(e)&&("wc_checkout"===S.type||"optin"===S.type)){var t=[],n=function(n){S.filters.includes(n)&&t.push(Object(r.createElement)("div",{className:o()("template-filter",{"active-filter":j==n}),onClick:function(){if(z(n),Object(b.k)({group:n}),g){var e=W.template,t=(e=void 0===e?{}:e).group_type;Object(a.isEmpty)(t)||V({id:t[n],template:{group_type:t}})}},key:n,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,e[n]),(m((null==S?void 0:S.tempPro)||"no")||["2","3"].includes(n)&&!0!==Q||"popup"===n&&!0!==Q)&&Object(r.createElement)(P.a,{icon:"lock",size:"18"})))};for(var c in e)n(c);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},Object(s.__)("Type"),":"),t))}}}(),!v&&function(){if("upsell"===c&&!0!==Q)return Object(r.createElement)(T.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([g?"Step":"Template","upsell",null==S?void 0:S.name,"Notice","Bar"])});switch(g?c:F){case"upsell":if(!0!==Q)return Object(r.createElement)(T.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([g?"Step":"Template","upsell",null==S?void 0:S.name,"Notice","Bar"])});break;case"wc_checkout":if(m(null==S?void 0:S.pro)||["2","3"].includes(j)&&!0!==Q){var e="This template is part of the pro plan. To access it, consider upgrading.";return"2"===j?e="Two-Step Checkout is a pro feature. To access it, consider upgrading.":"3"===j&&(e="Three-Step Checkout is a pro feature. To access it, consider upgrading."),Object(r.createElement)(T.a,{align:"left",content:e,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([g?"Step":"Template","Checkout",null==S?void 0:S.name,"Notice","Bar"])})}break;case"optin":if(m((null==S?void 0:S.pro)||"no")||"popup"===j&&!0!==Q){var t="This template is part of the pro plan. To access it, consider upgrading.";return"popup"==j&&(t=Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin "),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},j),Object(s.__)(" is a pro feature. To access it, consider upgrading."))),Object(r.createElement)(T.a,{align:"left",content:t,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([g?"Step":"Template","Optin",null==S?void 0:S.name,"Notice","Bar"])})}}return"yes"!==(null==S?void 0:S.pro)||Object(R.v)()?"":Object(r.createElement)(T.a,{align:"left",content:"This template is part of the pro plan. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(R.o)([g?"Step":"Template",g?c:F,null==S?void 0:S.name,"Notice","Bar"])})}(),Object(a.isEmpty)(B)||Object(a.isEmpty)(pe)?"":B.map((function(e,t){var n=(null==e?void 0:e.preview)||"",a=(null==e?void 0:e.id)||"";return Object(r.createElement)(N,{key:t,className:o()("wffn_template_preview_frame",ee,{"hide-preview":e.id!==S.prevId}),title:"Funnel Template",src:pe.includes(a)?n:"",onLoad:function(e){if(Y(!0),e&&B[t+1]){var n=JSON.parse(JSON.stringify(pe));n.push(B[t+1].id),me(n)}}})}))),Object(a.isEmpty)(k)||ue?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},J(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},k&&k.map((function(e,t){return Object(r.createElement)("label",{key:t,className:o()("wffn_template_page_options",{active_preview:e.id==(null==S?void 0:S.thumbnail)}),onClick:function(){g&&"step"===w?(V({id:e.id,template:e}),Object(b.k)({},"".concat(_,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel))):g&&"funnel"===w?Object(b.k)({},"".concat(_,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step)):"upsell"===c?Object(b.k)({},"".concat(_,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel)):Object(b.k)({},"".concat(_,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step))}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},g?Object(r.createElement)(q,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name,!!g&&"yes"===e.pro&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro wffn-static-ribbon"},"PRO")))})))))),Object(r.createElement)(C.a,{isOpen:re,onRequestClose:function(){return ae(!1)},modalContent:G(G({title:!1===Q?Object(s.__)("".concat(null==S?void 0:S.name," is a PRO template"),"funnel-builder"):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===Q?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===Q?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==Q&&{action:function(){return Object(b.k)({},"/settings/")}}),{},{proLink:Object(R.o)([g?"Step":"Template",g?c:"upsell"===c?"upsell":F,null==S?void 0:S.name,"Upgrade","Modal"])})}),(m((null==S?void 0:S.pro)||"no")||"yes"!==(null==S?void 0:S.pro)&&(be||de||"upsell"===F))&&Object(r.createElement)(I.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},"Yor are using ",null==S?void 0:S.name," ","Funnel. In this funnel there are some pro features like ",Object(r.createElement)("mark",null,"Two Step")," and"," ",Object(r.createElement)("mark",null,"Three Step Checkout"),","," ",Object(r.createElement)("mark",null,"One Click Upsell"),","," ",Object(r.createElement)("mark",null,"Optin Popup"),"."),confirmButtonText:Object(s.__)("Upgrade to PRO","funnel-builder"),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===Q?Object(b.k)({},"/settings/"):window.open(Object(R.o)([g?"Step":"Template",g?c:"upsell"===c?"upsell":F,null==S?void 0:S.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){"funnel"!==w&&d();var e="1";if("optin"===c||"optin"===F?(Object(b.k)({group:"inline"}),e="inline"):Object(b.k)({group:"1"}),g){var t=W.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||V({id:n[e],template:{group_type:n}})}},onRequestClose:function(){le(!1)},isOpen:oe,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0})):""}n(75);function X(e){var t=e.importBuildFromScratch,n=e.getRibbonName,a=e.activeTemplateGroup,c=e.templateID,o=void 0===c?"scratch":c;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},"upsell"===a&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},n({pro:"yes"})),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se",onClick:function(e){return t(o,e)}},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(P.a,{icon:"plus",width:"48",height:"48",color:"#000000"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)("span",{className:"wffn_import_text"},Object(s.__)("Start from scratch","funnel-builder"))))))))}n(826);var Z=n(40),ee=n(410),te=n(273),ne=n(39),re=n(16),ae=n(13),ce=n(417),oe=n(656);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.onCloseModal,n=e.onComplete,a=e.isWorking,c=e.activeTemplateGroup,o=e.showCloneOption,l=e.templateGroup,i=le(Object(r.useState)(""),2),u=i[0],p=i[1],m=le(Object(r.useState)({}),2),b=(m[0],m[1]),d=le(Object(r.useState)(""),2),O=d[0],v=d[1],j=le(Object(r.useState)(null),2),y=j[0],_=j[1];Object(r.useEffect)((function(){b({})}),[]);var g=function(){O?(p(""),n(O,!(!y||!y.copyFrom)&&y.step)):p("Step name is required field")};return Object(r.createElement)(f.Modal,{title:Object(s.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!a,overlayClassName:"bwf-create-funnel-modal__overlay"},u&&Object(r.createElement)(f.Notice,{status:"error",onRemove:function(){return p("")}},u),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"===e.key&&g()},role:"main"},Object(r.createElement)(f.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Name","funnel-builder"),value:O,onChange:function(e){return v(e)},disabled:a}),o&&Object(r.createElement)(oe.a,{step:{type:"upsell"===c?"wc_upsells":c,title:l[c],is_substep:!1},onStepSelected:function(e){return _(e)}}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(f.Button,{onClick:t,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(f.Button,{isPrimary:!0,disabled:a,isBusy:a,onClick:g,name:"add-funnel"},Object(s.__)(a?"Importing":"Add","funnel-builder")))))};n(827);function se(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=function(){return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)(ne.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},se(Array(5)).map((function(e,t){return Object(r.createElement)(ne.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),Object(r.createElement)(ne.a,{gap:6,justify:"flex-start"},se(Array(5)).map((function(e,t){return Object(r.createElement)(ne.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},se(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn-is-placeholder"})))})))))))},me=n(66),be=n(69);n(828);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){var t=de(Object(r.useState)(!1),2),n=t[0],a=t[1],c=e.toolTipText,o=e.size,l=(e.iconColor,e.iconSize),i=void 0===l?20:l,u=e.position,s=(e.icon,e.abPos),p=void 0!==s&&s,m=e.visible,b=void 0===m||m,d={height:i+"px",width:i+"px"};return p&&(d.position="relative"),b?Object(r.createElement)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(e){e.preventDefault(),a(!1)},style:d,onClick:function(){return a(!1)}},e.children,n&&Object(r.createElement)(f.Popover,{position:u,noArrow:!1,className:"bwf-tooltip bwf-tooltip-sz-"+o,style:p?{position:"absolute"}:{}},c)):e.children},je=["edit"];function ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _e(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e){var t=e.activeFilter,n=e.defaultBuilder,c=e.filters,l=e.editors,i=e.templates,p=e.isTemplateLoading,d=e.activeBuilder,O=e.activeTemplateGroup,v=e.templateGroup,j=void 0===v?[]:v,y=e.funnelId,_=void 0===y?0:y,g=e.showDefaultEditorNotice,w=void 0===g||g,h=e.templateCards,E=void 0===h?{}:h,k=e.previewData,S=e.onImportComplete,N=e.templateFilterCheck,P=e.showTemplatesNav,T=e.parentRoute,D=e.disabledNavs,B=void 0===D?[]:D,F=e.showBuildFromScratch,L=void 0===F||F,U=e.funnelTitleModalData,M=void 0===U?{}:U,z=e.scratchConfirmModalData,G=e.importApiPrefix,W=void 0===G?"funnels":G,J=e.templateListNotice,$=e.showImportNotice,V=void 0===$?"":$,K=Object(b.i)(),Y=Object(me.a)().updateStatus,H=(0,Object(be.a)().getStatus)(),oe=_,le=Object(r.useContext)(R.a),ie=Ee(Object(r.useState)(!1),2),se=ie[0],fe=ie[1],de=Ee(Object(r.useState)(!1),2),Oe=de[0],ge=de[1],ke=Object(x.a)(),Se=ke.fetch,Ne=ke.makeDefaultEditor,Ce=ke.setActiveBuilder,Pe=ke.setActiveGroup,Te=ke.setCurrentTemplate,Ie=ke.setActiveStep,xe=ke.setPageBuildersOptions,Ae=ke.setActiveSubFilter,Re=Object(A.a)(),De=Re.getCurrentTemplate,Be=Re.getPageBuildersOptions,Fe=Re.getPageBuildersTexts,Le=De(),Ue=Be(),qe=Fe(),Me=Object(u.d)(),ze=Me.builder,Ge=Me.templateId,We=Object(b.i)().importType,Je="wc_checkout"===We?"funnel":We,$e=Object(ee.a)().fetch,Ve=Object(te.a)().data,Ke=Object(Z.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(a.isEmpty)(E)&&Se(),$e(),function(){le("")}}),[]),Object(R.b)("Import Funnel");var Ye=Ee(Object(r.useState)(!1),2),He=Ye[0],Qe=Ye[1],Xe=Ee(Object(r.useState)(!1),2),Ze=Xe[0],et=Xe[1],tt=Ee(Object(r.useState)(!1),2),nt=tt[0],rt=tt[1],at=Ee(Object(r.useState)({}),2),ct=at[0],ot=at[1],lt=Ee(Object(r.useState)({id:"",template:{}}),2),it=lt[0],ut=lt[1],st=Ee(Object(r.useState)(!1),2),ft=st[0],pt=st[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Ce(d)}),[O,c,l]),Object(r.useEffect)((function(){Ge&&(Qe(!1),ut({id:Ge,template:{}}))}),[]),Object(r.useEffect)((function(){Oe&&(Object(b.k)({},"/templates"),le(Object(s.__)("Template not found for requested URL. Please select from the list.")),Object(R.r)(le,3e3))}),[Oe]);var mt=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},bt=function(e){if(n!==e){pt(!0);var t=function(e,t){var n={};return Object.values(e).forEach((function(e){var t=e.values;n=we(we({},t),n)})),n.default_selected_builder=t,n}(Ve.woofunnels_general_settings,e);try{m()({path:"woofunnels-admin/funnels/settings/woofunnels_general_settings",method:"POST",data:{settings:JSON.stringify(t)}}).then((function(t){t.success?Ne(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){pt(!1),Object(a.delay)(le,5e3,"")}))}catch(e){console.log(e),Object(a.delay)(le,5e3,""),pt(!1)}}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate";try{ot((function(e){return we(we({},e),{},{disableConfirm:!0,confirmButtonText:"Activating",cancelButtonText:"",shouldCloseOnClickOutside:!1})})),m()({path:"woofunnels-admin/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n),method:"POST"}).then((function(e){!0===e.success&&("funnel"===Je&&_?vt(it.id):fe(!0),ot({status:!1}),xe(we(we({},Ue),{},he({},d,we(we({},Ue[d]),{},{"plugin-status":"activated"})))))})).catch((function(e){ot({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ue[d];if("wp_editor"!==d&&"customizer"!==d&&t["plugin-status"]&&"activated"!==t["plugin-status"]){var n=qe[d],a=n.text;"gutenberg"===d&&e&&(a=Object(s.__)("To have the best experience in Gutenberg, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var c={status:!0,modalTitle:Object(s.__)("Import Template"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:a}}),closeIcon:!0};c.confirmButtonText=n.ButtonText,"yes"===n.show_cancel_btn&&(c.cancelButtonText="Cancel"),"gutenberg"===d&&e&&(c.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),ot(we(we({},c),{},{onConfirm:function(){if(n.builder_link&&"install"===t["plugin-status"]&&"yes"===n.noInstall)return window.open(n.builder_link,"_blank"),void ot({status:!1});"yes"!==n.show_cancel_btn&&ot({status:!1}),dt(t.plugins[0].slug,t.plugins[0].init,t["plugin-status"],{modalContentProps:c})},onCancel:function(){"gutenberg"===d&&e&&fe(!0),ot({status:!1})}})),et(!1)}else"funnel"===Je&&_&&!e?vt(it.id):fe(!0)},vt=function(e,n,r){et({id:e,group:O,filter:t});var c=!0,o=d;"upsell"===O&&"wp_editor"===d?o="custom":"wc_checkout"===O&&"wp_editor"===d?o="embed_forms":"wc_checkout"===O&&"customizer"===d&&(o="pre_built");try{var l=Object.create({});l.template=e,l.builder=o;var i=Object.create({}),u=Object.create({});if(oe&&"step"===Je){if(r){var f=r&&r.hasOwnProperty("key")?r.key:0;l.title=n,l.inherit_from=f,l.type=O,delete l.template,delete l.builder}else l.funnel_id=oe,l.type=O,l.title=n,l.template_type=t;!_t||u.is_upsells||H.is_upsells||"upsell"!==O||(u.is_upsells=!0),u.is_checkout||H.is_checkout||"wc_checkout"!==O||(u.is_checkout=!0)}else{k().thumbnails.forEach((function(e){i["upsell"===e.step?"wc_upsells":e.step]=e.slug,!_t||u.is_upsells||H.is_upsells||"upsell"!==e.step||(u.is_upsells=!0),u.is_checkout||H.is_checkout||"wc_checkout"!==e.step||(u.is_checkout=!0)})),l.steps=JSON.stringify(i),oe&&"funnel"===Je?l.funnel_id=Number(oe):l.title=n}var p=0!==oe&&"step"===Je?Object(R.f)("woofunnels-admin/funnels/".concat(oe,"/steps")):Object(R.f)("woofunnels-admin/".concat(W,"/import_template"));m()({method:"POST",data:l,path:p}).then((function(e){e.status&&!0===e.status?(Object(a.isEmpty)(H.funnels)?u.funnels=[e.funnel_id]:1===H.funnels.length&&(u.funnels=[].concat(_e(H.funnels),[e.funnel_id])),Y(u),c=!1,oe||(e.funnel_id?jt(e.funnel_id):ot({status:!0,modalTitle:Object(s.__)("Import Template"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&S&&("funnel"===Je&&Ke(!1),S(e))):(ot({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),fe(!1))})).catch((function(e){ot({status:!0,error:e.message||e.msg}),fe(!1)})).finally((function(){c&&et(!1)}))}catch(e){et(!1)}},jt=function e(t){try{m()({path:Object(R.f)("woofunnels-admin/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?S?(Qe(!1),S({funnel_id:t})):(delete K.group,Object(b.k)({},"/funnels/".concat(t),K)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},yt=function(e){var t=!1,n=!(!Object(R.t)()||!Object(R.u)())&&Object(R.u)();return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},_t=yt("status"),gt=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(z&&!r)ot(we(we({},z),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return ot({status:!1})}}));else{if(Ze)return!1;"upsell"===O&&yt("yes")?rt(!0):(ut({id:t,isBuildFromScratch:!0,template:{name:j[O]}}),V?V():Ot(!0),oe&&Te({id:t}),oe||Ke(!0))}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch";return Object(r.createElement)(X,{importBuildFromScratch:gt,getRibbonName:mt,activeTemplateGroup:O,templateID:e})};return Object(r.createElement)(r.Fragment,null,p?Object(r.createElement)(pe,null):Object(r.createElement)("div",{className:"wffn_template_wrap"},P&&function(){var e={},t=window.location&&window.location.search?Object(ae.parse)(window.location.search.substring(1)):{},n=(t.edit,ye(t,je));for(var a in j)"funnel"===Je&&"upsell"===a||(e[a]={},e[a].name=j[a],e[a].isExclusive="upsell"===a,e[a].link=decodeURIComponent(Object(b.f)({},"/templates/".concat(a),n)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(ne.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(e).map((function(n,a){var c=n===O,l=B.find((function(e){return e.key===n}));return Object(r.createElement)(f.FlexItem,{key:"bwf-temp-nav-".concat(a)},0===_?Object(r.createElement)(re.a,{className:o()("bwf-template-nav-item",{"is-selected":t.path==="/templates/"+n||"/templates"===t.path&&"funnel"===n}),href:e[n].link},Object(r.createElement)("div",null,e[n].name),e[n].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO STEP")):Object(r.createElement)(ve,{toolTipText:l&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},l.message),visible:l||!1,size:366},Object(r.createElement)("div",{className:o()("bwf-template-nav-item",{"is-selected":c&&!l},{"is-disabled":l}),onClick:function(){l||Pe(n)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,e[n].name),!Object(R.v)()&&e[n].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO"))))}))))}(),Object(r.createElement)("div",{id:"wffn_design_container"},Object(r.createElement)("div",{className:"wffn_tab_container"},Object(r.createElement)(ne.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector bwf-flex-wrap"},function(){var e=[],t=l[O],a=function(a){e.push(Object(r.createElement)(f.FlexItem,{key:a},Object(r.createElement)("label",null,Object(r.createElement)("input",{name:"",type:"radio",value:a,onChange:function(){var e;Ce(a),w&&(n===(e=a)||ft||le(Object(r.createElement)("div",null,Object(s.__)("Want to make this default page builder?","funnel-builder")," ",Object(r.createElement)(f.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){bt(e),Object(R.r)(le,100)}},Object(s.__)("Yes","funnel-builder")),Object(r.createElement)(f.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return Object(R.r)(le,0)}},Object(s.__)("No","funnel-builder")))))},checked:a===d&&"checked"}),Object(r.createElement)("span",{className:o()({"is-selected":a===d})},t[a]))))};for(var c in t)a(c);return e}()),J,Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:o()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!_})},function(){var e=[],t=function(t){var n=E[t];N(n,!!n.group_type&&Object.keys(n.group_type)[0])&&(!L&&n.build_from_scratch||e.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:t},n.build_from_scratch?wt(n.slug?n.slug:t):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===n.pro?Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},mt(n)):"",Object(r.createElement)("div",{className:n.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},n.thumbnail&&Object(r.createElement)(q,{src:n.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(f.Button,{onClick:function(e){Te({id:t,template:n}),n.group_type?Ae(Object.keys(n.group_type)[0]):0!==_&&"funnel"!==Je||"optin"!==O&&"wc_checkout"!==O||Ae("optin"===O?"inline":"wc_checkout"===O&&"1"),Qe(!0),ut({id:t,template:n}),e.preventDefault(),"upsell"===O&&0===_?Object(b.k)({},"".concat(T,"/").concat(O,"/").concat(d,"/preview/").concat(t)):0===_?Object(b.k)({},"".concat(T,"/").concat(O,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===Je&&Object(b.k)({},"".concat(T,"/templates/").concat(O,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)),Ie(n.steps[0].type)):Object(b.k)({},"".concat(T,"/templates/").concat(O,"/").concat(d,"/preview/").concat(t))},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn"},Object(s.__)("Preview","funnel-builder")))))),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},n.name)),Object(r.createElement)("div",{className:"wffn_template_meta_right"},n.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",n.steps.length,"funel-builder"),n.steps.length)):null))))))};for(var n in E)t(n);return"wp_editor"===d&&Object(a.isEmpty)(e)&&e.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},wt("upsell"===O?"wfocu-custom-empty":"wp_editor_1"))),e}())))),Object(r.createElement)(I.a,{className:"bwf-admin-modal-squeezy "+ct.className,isLoading:ct.loading,successMessage:ct.success,errorMessage:ct.error,isOpen:ct.status,autoHide:8e3,content:ct.content,confirmText:ct.confirmText,confirmButtonText:ct.confirmButtonText,cancelButtonText:ct.cancelButtonText,onConfirm:ct.onConfirm,onCancel:ct.onCancel,modalTitle:ct.modalTitle,disableConfirm:ct.disableConfirm,closeIcon:ct.closeIcon,onRequestClose:function(){return ot({status:!1})}}),Object(r.createElement)(C.a,{isOpen:nt,onRequestClose:function(){return rt(!1)},modalContent:we(we({title:!1===_t?Object(s.__)("Templates are a PRO Feature","funnel-builder"):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===_t?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===_t?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==_t&&{action:function(){return Object(b.k)({},"/settings/")}}),{},{proLink:Object(R.o)([0===_||"funnel"===Je?"Template":"Step",O,"Build","From","Scratch","Upgrade","Modal"])})}),se&&(0===_?Object(r.createElement)(ce.a,{onCloseModal:function(){fe(!1)},isWorking:Ze,onComplete:function(e){it.isBuildFromScratch?function(e){var n={funnel_name:e,template:"scratch"};Object(R.w)()&&(n.builder=d,n.default_step="yes",n.template=null==it?void 0:it.id),et({id:"scratch",group:O,filter:t});try{m()({method:"POST",data:n,path:Object(R.f)("woofunnels-admin/".concat(W))}).then((function(e){if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id,n=Object.create({});Object(a.isEmpty)(H.funnels)?n.funnels=[t]:1===H.funnels.length&&(n.funnels=[].concat(_e(H.funnels),[t])),Y(n),"funnels"===W?(delete K.group,Object(b.k)({},"/funnels/".concat(t),K)):S({funnel_id:e.funnel.id})}else!1===e.status&&(ot({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),fe(!1),et({}))}))}catch(e){}}(e):vt(it.id,e)},modalTitle:M.title}):Object(r.createElement)(ue,{onCloseModal:function(){fe(!1)},isWorking:Ze,activeTemplateGroup:O,templateGroup:j,showCloneOption:it.isBuildFromScratch,onComplete:function(e,t){vt(Le.id,e,t)}}))),(ze||He)&&Object(r.createElement)(Q,{isOpen:He||ze,onRequestClose:function(){Qe(!1),Ae(!1),K.group&&(delete K.group,Object(b.k)({},Object(b.g)(),K))},importTemplate:vt,templateGroup:j,activeGroup:O,templateID:it.id,template:it.template,activeEditor:d,importing:Ze,templateList:i,filters:c,templates:i,hasPRO:yt,checkEditor:V||Ot,previewData:k,isTemplateLoading:p,activeFilter:t,setPreviewErr:ge,parentRoute:T,funnelId:_,importType:Je}))};Ne.prototype={filters:i.a.object.isRequired,templates:i.a.object.isRequired,editors:i.a.object.isRequired,defaultBuilder:i.a.object.isRequired,templateLoading:i.a.func.isRequired,activeTemplateGroup:i.a.string.isRequired,templateGroup:i.a.object.isRequired};var Ce=Ne},656:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n(3),o=n(6),l=n(15),i=n.n(l),u=n(8),s=(n(822),n(7)),f=n.n(s);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.onSearch,n=e.isLoading,l=e.items,i=e.onItemClick,u=e.error,s=e.blurText,f=p(Object(r.useState)(""),2),m=f[0],b=f[1],d=p(Object(r.useState)(!1),2),O=d[0],v=d[1],j=Object(r.useRef)(null),y=s||"",_=Object(r.useRef)();return Object(r.useEffect)((function(){jQuery("body").on("click",(function(e){jQuery(_.current).find(e.target).length>0?v(!0):v(!1)}))}),[]),Object(r.createElement)("div",{className:"bwf-select-auto-box",ref:_},n&&Object(r.createElement)(a.Spinner,null),Object(r.createElement)(a.TextControl,{autoComplete:"off",value:O?m:y,onChange:function(e){return b(n=e),j.current&&clearTimeout(j.current),void(j.current=setTimeout((function(){return t(n)}),500));var n},placeholder:Object(c.__)("Type to search","funnel-builder")}),(!Object(o.isArray)(l)||!!u)&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(o.isArray)(l)&&l.length>0&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},Object(r.createElement)("ul",null,l.map((function(e){return Object(r.createElement)("li",{key:e.key},Object(r.createElement)("div",{onClick:function(t){return function(e,t){i(e),v(!1),t.preventDefault()}(e,t)}},e.value))})))))};b.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},b.propTypes={onSearch:f.a.func,isLoading:f.a.bool,items:f.a.arrayOf(f.a.shape({key:f.a.oneOfType([f.a.number,f.a.string]).isRequired,value:f.a.string.isRequired})),onItemClick:f.a.func,onChange:f.a.func,error:f.a.any};var d=b;function O(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=v(Object(r.useState)(!1),2),n=t[0],l=t[1],s=e.step,f=s.type,p=s.title,m=s.is_substep,b=void 0!==m&&m,j=e.onStepSelected,y=v(Object(r.useState)(!1),2),_=y[0],g=y[1],w=v(Object(r.useState)([]),2),h=w[0],E=w[1],k=v(Object(r.useState)(!1),2),S=k[0],N=k[1],C=v(Object(r.useState)(null),2),P=C[0],T=C[1],I=S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(a.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(c.__)("".concat(p," not found"),"funnel-builder")))),x=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(o.isEmpty)(t)){e.next=4;break}return N(!1),E([]),e.abrupt("return");case 4:return g(!0),e.prev=5,n=b&&!0===b?"&is_substep=true":"",e.next=9,i()({path:Object(u.f)("/woofunnels-admin/funnels/step/search/?s=".concat(t,"&type=").concat(f).concat(n))});case 9:r=e.sent,Object(o.isArray)(r)&&r.length>0?E(r):E([]),Object(o.isArray)(r)&&r.length>0?N(!1):N(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),E([]),N(!0);case 18:g(!1);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){O(c,r,a,o,l,"next",e)}function l(e){O(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),A=h.map((function(e){return{key:e.id,value:e.name}})),R=P&&P.hasOwnProperty("value")?Object(c.__)("Selected ".concat(p,": "),"funnel-builder")+P.value:"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.CheckboxControl,{label:Object(c.__)(p?Object(o.capitalize)("Clone from another ".concat(p)).replace("pages","page"):"Clone from another step","funnel-builder"),value:n,checked:n,onChange:function(){l(!n),j({step:P,copyFrom:!n})}}),n&&Object(r.createElement)(d,{onSearch:function(e){return x(e)},isLoading:_,items:A,error:I,onItemClick:function(e){T(e),j({step:e,copyFrom:n})},blurText:R}))}},822:function(e,t,n){},823:function(e,t,n){},824:function(e,t,n){},825:function(e,t,n){},826:function(e,t,n){},827:function(e,t,n){},828:function(e,t,n){}}]);