(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1197:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(853),o=r(72),c=r(2),i=r(3),l=r(864),u=r(277),s=r(4),f=r(12),m=r.n(f),b=r(5),p=r(848);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),c=new N(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=g(c,r);if(i){if(i===s)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var s={};function f(){}function m(){}function b(){}var p={};i(p,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(_([])));y&&y!==t&&r.call(y,a)&&(p=y);var w=b.prototype=f.prototype=Object.create(p);function O(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==d(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function g(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=b,i(w,"constructor",b),i(b,"constructor",m),m.displayName=i(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,i(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},O(j.prototype),i(j.prototype,o,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new j(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},O(w),i(w,c,"Generator"),i(w,a,(function(){return this})),i(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=_,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}t.default=function(e){var t=e.bulkActionId,r=e.setStep,f=e.setPending,d=e.isPending,h=Object(a.a)(),w=h.getSingleBulkActionData,j=h.getActionList,g=h.getActionSchemaList,E=Object(p.a)().setSingleBulkActionValue,k=w(),N=g(),_=j(),x=k.count,P=void 0===x?0:x,S=k.actions,L=k.contactFilters,A=k.enable_automation_run,T=void 0!==A&&A,D=function(){var e,n=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,m()({path:Object(b.k)("/bulk-action/".concat(t)),method:"POST",data:y(y({},k),{},{start_bulk_action:!0})}).then((function(e){200===e.code?e.hasOwnProperty("result")&&!Object(i.isEmpty)(e.result)&&(E("data",e.result),setTimeout((function(){r(4),f(!1)}),1e3)):f(!1)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),f(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){O(o,n,a,c,i,"next",e)}function i(e){O(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(o.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(c.__)("Review","wp-marketing-automations-crm"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-bulk-overview-wrapper"},Object(n.createElement)("div",{className:"bwf-bulk-overview-section"},Object(n.createElement)("div",{className:"bwf-bulk-header"},"Contacts"),Object(n.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(n.createElement)("div",{className:"bwf-bulk-data-item"},Object(n.createElement)("div",{className:"bwf-bulk-data-item-label"},"Total Contacts"),Object(n.createElement)("div",{className:"bwf-bulk-data-item-value"},parseInt(P))),Object(n.createElement)("div",{className:"bwf-bulk-data-item"},Object(n.createElement)("div",{className:"bwf-bulk-data-item-label"},"Segment"),Object(n.createElement)("div",{className:"bwf-bulk-data-item-value"},Object(i.isEmpty)(L)?"-":Object(l.b)(L))))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-bulk-overview-section"},Object(n.createElement)("div",{className:"bwf-bulk-header"},"Actions"),Object(n.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(n.createElement)("div",{className:"bwf-bulk-data-item"},Object(n.createElement)("div",{className:"bwf-bulk-data-item-value"},Object(n.createElement)(u.a,{actions:_,actionSchema:N,value:S}))))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-bulk-overview-section"},Object(n.createElement)("div",{className:"bwf-bulk-header"},"Automation"),Object(n.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(n.createElement)("div",{className:"bwf-bulk-data-item"},Object(n.createElement)("div",{className:"bwf-bulk-data-item-label"},"Trigger automations"),Object(n.createElement)("div",{className:"bwf-bulk-data-item-value"},T?"Enable":"Disable"))))),Object(n.createElement)("div",{className:"bwf-bulk-action-footer"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)(s.Button,{className:"bwf-display-flex",isSecondary:!0,onClick:function(){r(2)}},Object(c.__)("Previous","wp-marketing-automations-crm")),Object(n.createElement)(s.Button,{className:"bwf-display-flex",isPrimary:!0,onClick:D,isBusy:d},Object(c.__)("Start","wp-marketing-automations-crm")))))}},1236:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(2),o=r(4),c=r(3),i=r(853),l=r(848),u=r(204),s=r(8);r(453);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.index,r=e.actionInputType,i=e.group,l=e.actionData,f=e.setActionData,b=e.actionValue,d=e.customField,v=e.actions,h=e.setEdit,y=e.isOverview,w=p(Object(n.useState)("autonami"),2),O=(w[0],w[1]),j=p(Object(n.useState)({}),2),g=j[0],E=j[1];Object(n.useEffect)((function(){if(!Object(c.isEmpty)(i)){var e={};Object.keys(i).map((function(t){i[t].hasOwnProperty("actions")&&!Object(c.isEmpty)(i[t].actions)&&i[t].actions.map((function(r){e[r]=t}))})),E(e)}}),[i]),Object(n.useEffect)((function(){Object(c.isEmpty)(t)||O(g[t])}),[g,t]);var k=function(e){var t=[{label:Object(a.__)("Select Action","wp-marketing-automations-crm"),value:""}];return v.map((function(r){var n=!1;"autonami"!=g[r.value]&&(n=!0),l.hasOwnProperty(r.value)&&e!==r.value||n||(t.push({label:r.label,value:r.value}))})),t},N=function(e){var t="-";return Object(c.isEmpty)(v)||v.map((function(r){r.value==e&&(t=r.label)})),t};return y?Object(n.createElement)("div",{className:"bwf-group-select-overview"},Object(n.createElement)("div",{className:"bwf-group-select-overview-header"},Object(n.createElement)("div",{className:"bwf-group-select-action-name"},N(t)),Object(n.createElement)("div",{className:"bwf-group-select-action-events"},Object(n.createElement)("div",{onClick:function(){return h(t)}},Object(n.createElement)(s.a,{icon:"edit"})),Object(n.createElement)("div",{onClick:function(){var e=m({},l);delete e[t],f(e)}},Object(n.createElement)(s.a,{icon:"trash"})))),Object(n.createElement)("div",{className:"bwf-group-select-action-wrap"},Object(n.createElement)("div",{className:"bwf-group-select-action-style"},Object(n.createElement)("div",{className:"circle"}),t&&r.hasOwnProperty(t)&&!Object(c.isEmpty)(r[t])&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"line"}),Object(n.createElement)("div",{className:"circle from-bottom"}))),Object(n.createElement)("div",{className:"bwf-group-data-wrap"},Object(n.createElement)("div",{className:"bwf-group-select-action-data"},Object(n.createElement)("div",{className:"bwf-action-group"},Object(n.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Action","wp-marketing-automations-crm")),Object(n.createElement)("div",null,i.hasOwnProperty(g[t])&&i[g[t]].hasOwnProperty("label")?i[g[t]].label:"-")),Object(n.createElement)("div",{className:"bwf-action-map-icon"},Object(n.createElement)(s.a,{icon:"mapper",size:24})),Object(n.createElement)("div",{className:"bwf-action-action-selected"},Object(n.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Type")),Object(n.createElement)("div",null,N(t)))),Object(n.createElement)("div",{className:"bwf-group-data-values"},!d&&t&&r.hasOwnProperty(t)&&!Object(c.isEmpty)(r[t])&&Object(n.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Values","wp-marketing-automations-crm")),Object(n.createElement)("div",null,r.hasOwnProperty(t)&&!Object(c.isEmpty)(r[t])&&Object(n.createElement)(u.a,{selectorValue:b,data:t&&r.hasOwnProperty(t)?r[t]:{}})))))):Object(n.createElement)("div",{className:"bwf-group-select-edit"},Object(n.createElement)("div",{key:t,className:"bwf-action-selector-wrap"},Object(n.createElement)("div",{className:"bwf-action-select-wrp bwf-action-select"},Object(n.createElement)(o.SelectControl,{value:t,options:k(t),onChange:function(e){if(!Object(c.isEmpty)(e)){var r={};Object.entries(l).map((function(n){var a=p(n,2),o=a[0],c=a[1];o==t?r[e]={}:r[o]=c})),h(e),f(r)}},disabled:!(k(t).length>1)})),Object(n.createElement)("div",null)),!Object(c.isEmpty)(t)&&Object(n.createElement)("div",{className:d?"bwf-custom-field-wrapper":""},d&&Object(n.createElement)("div",{className:"bwf-custom-fields-row bwf-display-flex",style:{justifyContent:"flex-start"}},Object(n.createElement)("b",{className:"bwf-w-210"},Object(a.__)("Field","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf-w-30"}),Object(n.createElement)("b",null,Object(a.__)("Value","wp-marketing-automations-crm"))),Object(n.createElement)(u.b,{selectorValue:b,escapeArrowIcon:!0,data:t&&r.hasOwnProperty(t)?r[t]:{},setActionSelectorValue:function(e){var r=m({},l);r[t]=e,f(r)}}),!d&&Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-mt-10",style:{justifyContent:"flex-start"}},"new"!=t&&Object(n.createElement)(o.Button,{isPrimary:!0,onClick:function(){h("")},className:"bwf-mr-10",disabled:Object(c.isEmpty)(b)&&!Object(c.isEmpty)(r[t])},Object(a.__)("Save","wp-marketing-automations-crm")),Object(n.createElement)(o.Button,{isSecondary:!0,onClick:function(){if("new"==t||Object(c.isEmpty)(b)){var e=m({},l);delete e[t],f(e)}h("")}},Object(a.__)("Cancel","wp-marketing-automations-crm")))))},h=function(e){var t=e.actions,r=e.actionSchema,i=e.value,l=void 0===i?{}:i,u=e.group,s=void 0===u?{}:u,f=e.setActionValue,b=p(Object(n.useState)(l),2),d=b[0],h=b[1],y=p(Object(n.useState)(""),2),w=y[0],O=y[1];Object(n.useEffect)((function(){var e=Object(c.cloneDeep)(d);e.hasOwnProperty("new")&&delete e.new,Object(c.isEmpty)(e)&&O("new")}),[]),Object(n.useEffect)((function(){Object(c.isEmpty)(d)?(h({new:{}}),O("new")):f(d)}),[d]);var j;return Object(n.createElement)(n.Fragment,null,function(){if(!Object(c.isEmpty)(w)){var e=!1;return"new"!==w&&r.hasOwnProperty(w)&&r[w].hasOwnProperty("type")&&"bwfupdatefield"===r[w].type&&(e=!0),Object(n.createElement)(v,{index:w,actionInputType:r,actionData:d,setActionData:h,actionValue:d[w],customField:e,group:s,actions:t,isOverview:!1,setEdit:O})}return Object(n.createElement)(n.Fragment,null,Object.entries(d).map((function(e,a){var o=p(e,2),c=o[0],i=o[1],l=!1;return"new"!==c&&r.hasOwnProperty(c)&&r[c].hasOwnProperty("type")&&"bwfupdatefield"===r[c].type&&(l=!0),Object(n.createElement)(v,{index:c,actionInputType:r,actionData:d,setActionData:h,actionValue:i,customField:l,group:s,actions:t,isOverview:!0,setEdit:O,key:a})})))}(),(j=!1,t.map((function(e){d.hasOwnProperty(e.value)||(j=!0)})),j&&Object(c.isEmpty)(w)&&Object(n.createElement)("div",{onClick:function(){var e=m(m({},d),{},{new:{}});h(e),O("new")}},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(o.Button,{className:"bwf-cursor-pointer",isPrimary:!0},Object(a.__)("Add","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_clear_20"}))))},y=r(12),w=r.n(y),O=r(5),j=r(15),g=r(72);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){k=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),c=new N(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=O(c,r);if(i){if(i===s)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var s={};function f(){}function m(){}function b(){}var p={};i(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(_([])));v&&v!==t&&r.call(v,a)&&(p=v);var h=b.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==E(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function O(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=b,i(h,"constructor",b),i(b,"constructor",m),m.displayName=i(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,i(e,c,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},y(w.prototype),i(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new w(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(h),i(h,c,"Generator"),i(h,a,(function(){return this})),i(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=_,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),g(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;g(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=Object(j.i)(),r=S(Object(n.useState)(""),2),u=r[0],s=r[1],f=e.bulkActionId,m=e.setStep,b=e.setPending,p=e.isPending,d=Object(l.a)().setSingleBulkActionValue,v=Object(i.a)(),y=v.getSingleBulkActionData,E=v.getActionGroup,N=v.getActionList,x=v.getActionSchemaList,L=y(),A=x(),T=N(),D=E(),F=L.actions,C=void 0===F?{}:F,I=L.contactFilters,G=void 0===I?{}:I,B=L.enable_automation_run,V=void 0!==B&&B,Y=function(e){var t={};return Object.keys(e).map((function(e){if(Object(c.isEmpty)(C[e])||(t[e]=C[e]),Object(c.isObject)(t[e])){var r={};Object.keys(t[e]).map((function(n){Object(c.isEmpty)(t[e][n])||(r[n]=t[e][n])})),t[e]=r}Object(c.isEmpty)(t[e]&&Object(c.isEmpty)(A[e]))&&(t[e]=C[e])})),t},J=function(){var e,t=(e=k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b(!0),t=Y(C),!Object(c.isEmpty)(t)){e.next=6;break}return s("No actions selected"),e.abrupt("return");case 6:return e.next=8,w()({path:Object(O.k)("/bulk-action/".concat(f)),method:"POST",data:_(_({},L),{},{actions:t})}).then((function(e){200===e.code?e.hasOwnProperty("result")&&!Object(c.isEmpty)(e.result)&&(d("data",e.result),setTimeout((function(){m(3),b(!1)}),1e3)):(s(e.message),b(!1))}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s(e.t0.message),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){P(o,n,a,c,i,"next",e)}function i(e){P(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(g.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(a.__)("Actions","wp-marketing-automations-crm"))),Object(n.createElement)("div",{className:"bwf-bulk-action-wrapper"},u&&Object(n.createElement)(o.Notice,{status:"error",onRemove:function(){return s("")}},u),Object(n.createElement)("div",{className:"bwf-bulk-action-action-selector"},Object(n.createElement)("div",{className:"bwf-h4"},Object(a.__)("Add actions for selected contacts","wp-marketing-automations-crm")),Object(n.createElement)(h,{actions:T,actionSchema:A,group:D,value:Object(c.isEmpty)(C)?{new:{}}:C,setActionValue:function(e){d("data",_(_({},L),{},{actions:e}))}})),Object(n.createElement)("div",{className:"bwf_clear_30 bwf-bulk-action-line"}),Object(n.createElement)("div",{className:"bwf-bulk-action-action-selector"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Automation","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(o.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:V,className:"bwf-tooglecontrol-advance",onChange:function(e){d("data",_(_({},L),{},{enable_automation_run:e}))}})),Object(n.createElement)("div",{className:"bwf_clear_20"})),Object(n.createElement)("div",{className:"bwf-bulk-action-footer"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)(o.Button,{className:"bwf-display-flex",isSecondary:!0,onClick:function(){Object(c.isEmpty)(G)||Object(j.k)(G,"/",t),m(1)}},Object(a.__)("Previous","wp-marketing-automations-crm")),Object(n.createElement)(o.Button,{className:"bwf-display-flex",isPrimary:!0,onClick:function(){Object(c.isEmpty)(C)?s(Object(a.__)("Please select some actions to perform on contacts.","wp-marketing-automations-crm")):J()},isBusy:p},Object(a.__)("Next","wp-marketing-automations-crm")))))}}}]);