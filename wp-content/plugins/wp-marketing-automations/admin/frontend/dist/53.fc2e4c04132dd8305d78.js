(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(866),c=a(12),o=a.n(c),i=a(5),s=a(2),l=a(4),u=a(250),m=a(6),f=a.n(m),b=a(62),d=a(92),p=a(16),w=a(133),g=(a(990),a(3)),h=a(8),y=a(37),O=a(55),j=a(829),v=a(882),_=a(252);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,c=[],o=!0,i=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var N={1:"Active",2:"Failed",3:"Paused",4:"Waiting",5:"Terminated",6:"Reattempt"},L={1:"bwf-tags bwf-tag-green",2:"bwf-tags bwf-tag-red",3:"bwf-tags bwf-tag-red",4:"bwf-tags bwf-tag-orange",5:"bwf-tags bwf-tag-red",6:"bwf-tags bwf-tag-blue"},x=function(e){var t,a=e.tasks,r=e.isLoading,c=E(Object(n.useState)(""),2),o=c[0],m=c[1],b=E(Object(n.useState)({}),2),d=b[0],w=b[1],k=[{key:"contact",label:Object(s.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-240"},{key:"details",label:Object(s.__)("Automation","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details",isLeftAligned:!0},{key:"startedon ",label:Object(s.__)("Started On","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m",isLeftAligned:!0},{key:"last_run",label:Object(s.__)("Last Run","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m",isLeftAligned:!0},{key:"next_last_run",label:Object(s.__)("Next Run Time","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m",isLeftAligned:!0},{key:"status",label:Object(s.__)("Status","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-col-center",isLeftAligned:!0},{key:"journey",label:Object(s.__)("","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m",isLeftAligned:!0}],x=function(e){return Object(n.createElement)(y.a,{href:"admin.php?page=autonami&path=/automation/"+e.aid,type:"bwf-crm",className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:e.aid},e.hasOwnProperty("automation_title")?e.automation_title:"-")},P=function(e){var t=e.trail,a=void 0===t?"":t;return Object(g.isEmpty)(a)?"-":Object(n.createElement)("a",{className:"bwf-cursor-pointe bwf-a-no-underline",onClick:function(){m(a),w(e)}},"View Journey")},A=function(e){var t=e.data,a=void 0===t?{}:t;return!(!a.hasOwnProperty("type")||3!==parseInt(a.type))},S=function(e){return Object(n.createElement)(n.Fragment,null,Object(i.gb)()?Object(n.createElement)(y.a,{href:"admin.php?page=autonami&path=/contact/"+e.cid,type:"bwf-crm",className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:e.cid},Object(n.createElement)(_.a,{contact:e,date:e.date,dateText:Object(s.__)("Joined on","wp-marketing-automations")})):Object(n.createElement)(_.a,{contact:e,date:e.date,dateText:Object(s.__)("Joined on","wp-marketing-automations")}))},C=Object(g.isEmpty)(a)?[]:a.map((function(e){return[{display:S(e),value:e.hasOwnProperty("contact_name")?e.contact_name:"-"},{display:x(e),value:""},{display:e.hasOwnProperty("s_date")?Object(i.K)(e.s_date):e.hasOwnProperty("c_date")?Object(i.K)(e.c_date):"-",value:e.hasOwnProperty("c_date")?e.c_date:"-"},{display:(t=e,a=t.last_time,r=void 0===a?"":a,c=t.last,o=void 0===c?0:c,Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},""===r||0===parseInt(o)&&!t.hasOwnProperty("s_date")?"-":Object(n.createElement)(p.a,{justify:"justify",align:"top"},Object(n.createElement)(p.c,null,Object(i.K)(r))))),value:""},{display:e.hasOwnProperty("e_time")&&!A(e)?Object(i.K)(e.e_time):"-",value:"-"},{display:e.hasOwnProperty("status")&&N.hasOwnProperty(parseInt(e.status))?Object(n.createElement)("span",{className:L[e.status]},N[e.status]):Object(n.createElement)("span",{className:"bwf-tags bwf-tag-green"},"Completed"),value:"-"},{display:P(e),value:"-"}];var t,a,r,c,o}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,{className:f()("bwfcrm-forms-list-table"),rows:C,headers:k,query:{paged:1},rowsPerPage:C.length>0?C.length:10,totalRows:C.length>0?C.length:10,isLoading:r,rowHeader:!0,showMenu:!1,hideHeader:"yes",emptyMessage:Object(s.__)("No Automations found","wp-marketing-automations")}),!Object(g.isEmpty)(o)&&Object(n.createElement)(l.Modal,{title:"",onRequestClose:function(){m(""),w({})},className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen"},Object(n.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(n.createElement)("div",{className:"bwf-wrapper"},Object(n.createElement)("div",{className:"bwf-left-section"},Object(n.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:function(){m(""),w({})}},Object(n.createElement)(h.a,{icon:"arrow-left",size:20})),Object(n.createElement)("div",{className:"bwf-title bwf-h3"},d.hasOwnProperty("automation_title")?d.automation_title:"")),Object(n.createElement)("div",{className:"bwf-right-section"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(n.createElement)(h.a,{icon:"split-path",width:16,height:18}),Object(n.createElement)("span",null,Object(s.__)("Contact Journey"))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(O.a,{id:d.cid,label:(t="-",Object(g.isEmpty)(d)||(t=Object(g.isEmpty)(d.f_name)&&Object(g.isEmpty)(d.l_name)?d.email:d.f_name+" "+d.l_name),t)})))),Object(n.createElement)(j.e,null,Object(n.createElement)(v.a,{customerData:{trail:o},isConatctTab:!0,automatonID:d.aid}))))},P=a(72);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(){I=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,c=Object.create(r.prototype),o=new _(n||[]);return c._invoke=function(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return k()}for(a.method=r,a.arg=c;;){var o=a.delegate;if(o){var i=O(o,a);if(i){if(i===u)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=l(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}(e,a,o),c}function l(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function m(){}function f(){}function b(){}var d={};i(d,r,(function(){return this}));var p=Object.getPrototypeOf,w=p&&p(p(E([])));w&&w!==t&&a.call(w,r)&&(d=w);var g=b.prototype=m.prototype=Object.create(d);function h(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(r,c){function o(){return new t((function(n,o){!function n(r,c,o,i){var s=l(e[r],e,c);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==A(m)&&a.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(m).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(r,c,n,o)}))}return n=n?n.then(o,o):o()}}function O(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function E(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,c=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return c.next=c}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=b,i(g,"constructor",b),i(b,"constructor",f),f.displayName=i(b,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,i(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},h(y.prototype),i(y.prototype,c,(function(){return this})),e.AsyncIterator=y,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var o=new y(s(t,a,n,r),c);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},h(g),i(g,o,"Generator"),i(g,r,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],o=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var i=a.call(c,"catchLoc"),s=a.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),v(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;v(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:E(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}function D(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function F(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){D(c,n,r,o,i,"next",e)}function i(e){D(c,n,r,o,i,"throw",e)}o(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,c=[],o=!0,i=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(e){var t=Object(n.useContext)(i.d),a=e.match.params.cartType,c=e.match.params.id;Object(r.a)(a,"","Automations","admin.php?page=autonami&path=/carts/".concat(a),"left",!1);var m=M(Object(n.useState)(25),2),y=m[0],O=m[1],j=M(Object(n.useState)(0),2),v=j[0],_=j[1],E=M(Object(n.useState)(0),2),k=E[0],N=E[1],L=M(Object(n.useState)({}),2),A=L[0],S=L[1],T=M(Object(n.useState)(!1),2),D=T[0],H=T[1],R=M(Object(n.useState)({}),2),q=R[0],G=R[1],B=M(Object(n.useState)(!1),2),J=B[0],K=B[1],z=M(Object(n.useState)(),2),U=z[0],Q=z[1],Y=M(Object(n.useState)({status:!1,loading:!1}),2),Z=Y[0],$=Y[1],V=A.v1,W=void 0===V?[]:V,X=A.v2,ee=void 0===X?[]:X,te=function(){var e=F(I().mark((function e(){var t,n,r,l,u,m,f,b=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},K(!0),e.prev=2,n="",t&&t.search&&(n="search=".concat(t.search)),e.next=7,o()({method:"GET",path:Object(i.k)("/carts/".concat(c,"/tasks/?offset=").concat(v,"&limit=").concat(y,"&").concat(n,"&type=").concat(a))});case 7:if((r=e.sent)&&r.result){e.next=11;break}return Q(Object(s.__)("Blank response returned","wp-marketing-automations")),e.abrupt("return");case 11:l=r.total_count,u=r.result,m=r.limit,f=r.offset,l&&N(parseInt(l)),m&&O(parseInt(m)),f&&_(parseInt(f)),u&&S(u),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),Q(e.t0&&e.t0.message?e.t0.message:Object(s.__)("Unknown Error Occurred","wp-marketing-automations"));case 21:K(!1);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(i.f)("Cart Task #"+c),te()}),[]);var ae=[{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"task",label:Object(s.__)("Task","wp-marketing-automations"),isLeftAligned:!0},{key:"automation",label:Object(s.__)("Automation","wp-marketing-automations"),isLeftAligned:!0},{key:"actions",label:Object(s.__)("Action","wp-marketing-automations"),isLeftAligned:!0},{key:"data",label:Object(s.__)("Data","wp-marketing-automations"),isLeftAligned:!0},{key:"date",label:Object(s.__)("Date","wp-marketing-automations"),isLeftAligned:!0},{key:"show",label:"",isLeftAligned:!0},{key:"status",label:Object(s.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center"}],ne=function(e){return Object(n.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+e.automation_id,className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:e.id},e.hasOwnProperty("automation_name")?e.automation_name:"-")},re=function(e){e!==y&&(O(y),te())},ce=function(){var e=F(I().mark((function e(a){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($({status:!0,loading:!0}),Object(g.isEmpty)(a)){e.next=13;break}return e.prev=2,e.next=5,o()({path:Object(i.k)("/automations/run-tasks"),method:"POST",data:{task_ids:a}}).then((function(e){200===e.code?($({status:!0,success:e.message}),t(e.message),te()):$({status:!0,error:e.message})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),$({status:!0,error:e.t0.message});case 10:Object(i.Z)(t,2e3),e.next=14;break;case 13:$({status:!0,error:Object(s.__)("No Task Selected","wp-marketing-automations")});case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){return Object(n.createElement)(b.a,{label:Object(s.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var a=t.onToggle;return Object(n.createElement)(n.Fragment,null,"t_0"==e.status&&Object(n.createElement)(d.a,{isClickable:!0,onInvoke:function(){ce([e.id]),a()}},Object(n.createElement)(p.a,{justify:"flex-start"},Object(n.createElement)(p.c,null,Object(n.createElement)(h.a,{icon:"play"})),Object(n.createElement)(p.c,null,Object(s.__)("Run Now","wp-marketing-automations")))),Object(n.createElement)(d.a,{isClickable:!0,onInvoke:function(){$({deleteEntityName:e.automation_name,status:!0,taskId:e.id}),a()}},Object(n.createElement)(p.a,{justify:"flex-start"},Object(n.createElement)(p.c,null,Object(n.createElement)(h.a,{icon:"trash"})),Object(n.createElement)(p.c,null,Object(s.__)("Delete","wp-marketing-automations")))))}})},ie={l_0:Object(s.__)("Failed","wp-marketing-automations"),l_1:Object(s.__)("Completed","wp-marketing-automations"),t_0:Object(s.__)("Scheduled","wp-marketing-automations"),t_1:Object(s.__)("Paused","wp-marketing-automations")},se={l_0:"bwf-tags bwf-tag-red",l_1:"bwf-tags bwf-tag-green",t_0:"bwf-tags bwf-tag-blue",t_1:"bwf-tags bwf-tag-red"},le=Array.isArray(W)?W.map((function(e){return[{display:oe(e),value:""},{display:"#".concat(e.id),value:""},{display:ne(e),value:""},{display:e.task_integration+(e.task_integration_action?" : ".concat(e.task_integration_action):""),value:""},{display:Object(n.createElement)("ul",{dangerouslySetInnerHTML:{__html:e.task_details}}),value:""},{display:Object(n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.task_date}}),value:""},{display:Object(n.createElement)(l.Button,{icon:Object(n.createElement)(h.a,{icon:"view",size:30}),onClick:function(){G(e),H(!0)}}),value:""},{display:ie[e.status]?Object(n.createElement)("span",{className:se[e.status]},ie[e.status]):"-",value:e.status}]})):[],ue=function(){var e=F(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(C(C({},Z),{},{loading:!0})),!Z.hasOwnProperty("taskId")){e.next=11;break}return e.prev=2,e.next=5,o()({path:Object(i.k)("/automations/tasks/"),method:"DELETE",data:{task_ids:[Z.taskId]}}).then((function(e){200==e.code&&($(C(C({},Z),{},{success:e.message})),t(e.message),te())}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),$(C(C({},Z),{},{error:e.t0.message}));case 10:Object(i.Z)(t,1e3);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return U?Object(n.createElement)(l.Notice,{status:"error"},U):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(P.a,null),!Object(g.isEmpty)(ee)&&!J&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf_main_heading_inline bwf-mr-15"},Object(s.__)("Automations","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(x,{tasks:ee,isLoading:J}),Object(n.createElement)("div",{className:"bwf_clear_30"})),(!Object(g.isEmpty)(W)||J)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf_main_heading_inline bwf-mr-15"},J?Object(n.createElement)("div",{className:"bwf-h-30 bwf-w-210 bwf-placeholder-temp"}):Object(n.createElement)(n.Fragment,null,Object(s.__)("Automation Tasks","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(u.a,{className:f()("bwfcrm-forms-list-table",{"has-search":!0}),rows:le,headers:ae,query:{paged:v/y+1},rowsPerPage:J?5:y,totalRows:k,isLoading:J,onPageChange:function(e,t){_((e-1)*y),te()},onQueryChange:function(e){return"per_page"!==e?function(){}:re},rowHeader:!0,showMenu:!1,hideHeader:"yes",emptyMessage:Object(s.__)("No tasks found","wp-marketing-automations")})),Object(g.isEmpty)(ee)&&Object(g.isEmpty)(W)&&!J&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf_main_heading_inline bwf-mr-15"},Object(s.__)("Automation Tasks","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(u.a,{className:f()("bwfcrm-forms-list-table",{"has-search":!0}),rows:[],headers:ae,query:{paged:1},rowsPerPage:10,totalRows:10,isLoading:!1,rowHeader:!0,showMenu:!1,hideHeader:"yes",emptyMessage:Object(s.__)("No tasks found","wp-marketing-automations")})),Object(n.createElement)(w.a,{modalTitle:Object(s.__)("Delete Task"),confirmText:Object(s.__)("Are you sure you want to delete this task ?","wp-marketing-automations"),deleteEntityName:Z.deleteEntityName,confirmButtonText:Object(s.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(s.__)("Cancel","wp-marketing-automations"),onConfirm:ue,isLoading:Z.loading,successMessage:Z.success,errorMessage:Z.error,onRequestClose:function(){return $({status:!1})},isOpen:Z.status,isDelete:!0}),D&&Object(n.createElement)(l.Modal,{title:"Details",onRequestClose:function(){return H(!1)},className:"bwf-message-preview-modal bwf-admin-modal bwf-admin-modal-squeezy bwf-task-model"},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(s.__)("Automation","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_align_center"},q.automation_name)),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(s.__)("Event","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_align_center"},q.automation_source+" : "+q.automation_event)),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(s.__)("Action","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_align_center"},q.task_integration+(q.task_integration_action?" : ".concat(q.task_integration_action):""))),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey bwf-task-details"},Object(n.createElement)("ul",{className:"bwf_align_center",dangerouslySetInnerHTML:{__html:q.task_details}})),!Object(g.isEmpty)(q.task_message)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h3 bwf-pt-15"},Object(s.__)("Notes","wp-marketing-automations")),Object.entries(q.task_message).map((function(e){var t=M(e,2),a=t[0],r=t[1];return Object(n.createElement)("div",{className:"bwf-p-15"},Object(n.createElement)("div",{className:"bwfcrm-task_notes_card"},r),Object(n.createElement)("div",{className:"bwfcrm-task_notes_time"},Object(n.createElement)("i",null,a)))}))))))}},866:function(e,t,a){"use strict";var n=a(132),r=a(0),c=a(2),o=a(5),i=a(137);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left",m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},b=f.carts_nav,d=Object(n.a)(),p=d.setActiveMultiple,w=d.resetHeaderMenu,g=d.setL2NavType,h=d.setL2Nav,y=d.setBackLink,O=d.setBackLinkLabel,j=d.setL2Title,v=d.setL2NavAlign,_=d.setPageHeader,E=d.setPageCountData,k=Object(i.a)(),N=k.getPageCountData,L=N();return Object(r.useEffect)((function(){w(),Object(o.cb)()&&g("menu"),Object(o.cb)()&&m&&h(b),p({leftNav:"carts",rightNav:e}),s&&y(s),a&&j(a),O(Object(c.__)("All Carts","wp-marketing-automations")),v(u),!Object(o.cb)()&&j(Object(c.__)("Cart Tracking","wp-marketing-automations")),_("Carts"),E(l(l({},L),t))}),[e,t]),!0}},990:function(e,t,a){}}]);