"use strict";(self.webpackChunkrealCookieBanner_name_=self.webpackChunkrealCookieBanner_name_||[]).push([[357],{874:(e,t,a)=>{a.r(t),a.d(t,{ImportExportCards:()=>j});var n=a(5489),l=a(8503),r=a(3735),c=a(3554),o=a(6340),s=a(9591),i=a(4741),m=a(8920),u=a(6478),_=a(3828),p=a(1186),d=a(2519),E=a(8782),R=a(6315),k=a(7363),g=a(2467),b=a(9028),y=a(3697),Z=a(2841);const h=(0,c.Pi)((({result:e})=>{const t=(0,k.useCallback)((({fix:e,settingsTab:t,cookieDuplicate:a,cookie:n,blockerDuplicate:l,blocker:r,href:c})=>{switch(e){case"settings":return React.createElement("a",{href:"#/settings/".concat(t),target:"_blank",rel:"noreferrer"},(0,o.__)("Set manually"));case"cookieDuplicate":{const{original:[e,t],duplicate:[n,l]}=a;return React.createElement(React.Fragment,null,React.createElement("a",{href:"#/cookies/".concat(e,"/edit/").concat(t),target:"_blank",rel:"noreferrer"},(0,o.__)("Open original"))," ","•"," ",React.createElement("a",{href:"#/cookies/".concat(n,"/edit/").concat(l),target:"_blank",rel:"noreferrer"},(0,o.__)("Open newly created")))}case"cookie":{const[e,t]=n;return React.createElement("a",{href:"#/cookies/".concat(e,"/edit/").concat(t),target:"_blank",rel:"noreferrer"},(0,o.__)("Check manually"))}case"blockerDuplicate":{const{original:e,duplicate:t}=l;return React.createElement(React.Fragment,null,React.createElement("a",{href:"#/blocker/edit/".concat(e),target:"_blank",rel:"noreferrer"},(0,o.__)("Open original"))," ","•"," ",React.createElement("a",{href:"#/blocker/edit/".concat(t),target:"_blank",rel:"noreferrer"},(0,o.__)("Open newly created")))}case"blocker":return React.createElement("a",{href:"#/blocker/edit/".concat(r),target:"_blank",rel:"noreferrer"},(0,o.__)("Check manually"));case"link":return React.createElement("a",{href:c,target:"_blank",rel:"noreferrer"},(0,o.__)("Set manually"));default:return null}}),[]);return e?React.createElement(React.Fragment,null,React.createElement(Z.Z,{style:{marginTop:0}},(0,o.__)("Result")),e.messages.map((({message:e,severity:a,...n},l)=>React.createElement("div",{key:l,className:"notice notice-".concat(a," inline below-h2 notice-alt"),style:{margin:"10px 0 0 0"}},React.createElement("p",null,React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),!!n.fix&&React.createElement(React.Fragment,null," • ",t(n))))))):null}));var v=a(9161);const f={labelCol:{span:24},wrapperCol:{span:24}},S=(0,c.Pi)((()=>{var e;const{cookieStore:t,optionStore:a}=(0,b.m)(),{groups:n,busy:l}=t,[r]=R.Z.useForm(),[c,Z]=(0,k.useState)(!1),[S,P]=(0,k.useState)(void 0);(0,k.useEffect)((()=>{t.fetchGroups()}),[]);const C=(0,k.useCallback)((async e=>{Z(!0);try{P(await(0,g.W)({location:y.H,request:{cookieGroup:0,cookieStatus:"keep",cookieSkipExisting:!0,blockerStatus:"keep",blockerSkipExisting:!0,tcfVendorConfigurationStatus:"keep",...e}})),a.fetchCurrentRevision(),a.fetchSettings(),E.ZP.success((0,o.__)("Successfully imported!"))}catch(e){E.ZP.error(e.responseJSON.message)}finally{Z(!1)}}),[]),I=(0,k.useCallback)((e=>{const t=new FileReader;return t.readAsText(e,"UTF-8"),t.onload=e=>r.setFieldsValue({json:e.target.result}),t.onerror=()=>r.setFieldsValue({json:(0,o.__)("File could not be read.")}),!1}),[r]),x=(0,k.useCallback)(((e,t)=>{try{const a=JSON.parse(e);return!t||!!a[t]}catch(e){return!1}}),[]);return React.createElement(s.Z,{spinning:c||l},React.createElement(R.Z,(0,i.Z)({name:"import",form:r},f,{initialValues:{json:"",cookieStatus:"keep",cookieSkipExisting:!0,blockerStatus:"keep",blockerSkipExisting:!0,tcfVendorConfigurationStatus:"keep"},onFinish:C}),React.createElement(R.Z.Item,{label:(0,o.__)("Content to import"),required:!0},React.createElement(R.Z.Item,{name:"json",rules:[{required:!0,message:(0,o.__)("Please provide a value!")}]},React.createElement(d.Z.TextArea,{rows:5})),React.createElement("p",{className:"description"},(0,o.__)("or select a file to upload:")),React.createElement(p.Z,{accept:"application/json",showUploadList:!1,beforeUpload:I},React.createElement("a",{className:"button"},React.createElement(v.Z,null)," ",(0,o.__)("Select File")))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.json!==t.json},(({getFieldValue:e})=>x(e("json"),"cookies")&&React.createElement(R.Z.Item,{label:(0,o.__)("Fallback service group"),required:!0},React.createElement(R.Z.Item,{name:"cookieGroup",noStyle:!0,rules:[{required:!0,message:(0,o.__)("Please provide a group!")}]},React.createElement(_.Z,{style:{width:"70%"}},n.sortedGroups.map((({data:{id:e,name:t}})=>React.createElement(_.Z.Option,{key:e,value:e},t))))),React.createElement("p",{className:"description"},(0,o.__)("Select an alternative group to assign the service to if an imported service cannot be assigned to its original group."))))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.json!==t.json},(({getFieldValue:e})=>x(e("json"),"cookies")&&React.createElement(React.Fragment,null,React.createElement(R.Z.Item,null,React.createElement("span",null,React.createElement(R.Z.Item,{name:"cookieSkipExisting",valuePropName:"checked",noStyle:!0},React.createElement(u.Z,null)),React.createElement("span",null,"  ",(0,o.__)("Skip already existing services")))),React.createElement(R.Z.Item,{label:(0,o.__)("Set service status"),name:"cookieStatus",rules:[{required:!0,message:(0,o.__)("Please choose a status!")}]},React.createElement(m.ZP.Group,null,React.createElement(m.ZP.Button,{value:"keep"},(0,o.__)("Keep")),React.createElement(m.ZP.Button,{value:"publish"},(0,o.__)("Enabled")),React.createElement(m.ZP.Button,{value:"private"},(0,o.__)("Disabled")),React.createElement(m.ZP.Button,{value:"draft"},(0,o.__)("Draft"))))))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.json!==t.json},(({getFieldValue:e})=>x(e("json"),"blocker")&&React.createElement(React.Fragment,null,React.createElement(R.Z.Item,null,React.createElement("span",null,React.createElement(R.Z.Item,{name:"blockerSkipExisting",valuePropName:"checked",noStyle:!0},React.createElement(u.Z,null)),React.createElement("span",null,"  ",(0,o.__)("Skip already existing content blocker")))),React.createElement(R.Z.Item,{label:(0,o.__)("Set content blocker status"),name:"blockerStatus",rules:[{required:!0,message:(0,o.__)("Please choose a status!")}]},React.createElement(m.ZP.Group,null,React.createElement(m.ZP.Button,{value:"keep"},(0,o.__)("Keep")),React.createElement(m.ZP.Button,{value:"publish"},(0,o.__)("Enabled")),React.createElement(m.ZP.Button,{value:"private"},(0,o.__)("Disabled")),React.createElement(m.ZP.Button,{value:"draft"},(0,o.__)("Draft"))))))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.json!==t.json},(({getFieldValue:e})=>x(e("json"),"tcfVendorConfigurations")&&React.createElement(R.Z.Item,{label:(0,o.__)("Set TCF Vendor configuration status"),name:"tcfVendorConfigurationStatus",rules:[{required:!0,message:(0,o.__)("Please choose a status!")}]},React.createElement(m.ZP.Group,null,React.createElement(m.ZP.Button,{value:"keep"},(0,o.__)("Keep")),React.createElement(m.ZP.Button,{value:"publish"},(0,o.__)("Enabled")),React.createElement(m.ZP.Button,{value:"private"},(0,o.__)("Disabled")),React.createElement(m.ZP.Button,{value:"draft"},(0,o.__)("Draft")))))),React.createElement(R.Z.Item,null,React.createElement("input",{type:"submit",className:"button button-primary",style:{marginTop:10},value:(0,o.__)("Import")})),React.createElement(R.Z.Item,{style:{display:null!=S&&null!==(e=S.messages)&&void 0!==e&&e.length?"block":"none"}},React.createElement(h,{result:S}))))}));var P=a(3306),C=a(8573),I=a(7887),x=a(5648);const F={labelCol:{span:24},wrapperCol:{span:24}},w=(0,c.Pi)((()=>{const{optionStore:{tcf:e,others:{hints:{export:t}}}}=(0,b.m)(),[a]=R.Z.useForm(),[n,l]=(0,k.useState)(!1),[r,c]=(0,k.useState)(""),m=(0,k.useCallback)((async e=>{l(!0);try{c(JSON.stringify(await(0,g.W)({location:I.V,params:e})))}finally{l(!1)}}),[]),u=(0,k.useCallback)((()=>{(0,C.v)(r),E.ZP.success((0,o.__)("Export successfully copied to the clipboard."))}),[r]),_=(0,k.useCallback)((e=>((async()=>{l(!0),window.location.href=(0,g.Y)({location:I.V,params:{...a.getFieldsValue(),download:!0}}),l(!1)})(),e.preventDefault(),!1)),[l,a]);return React.createElement(s.Z,{spinning:n},React.createElement(R.Z,(0,i.Z)({name:"export",form:a},F,{initialValues:{settings:!0,cookieGroups:!0,cookies:!0,blocker:!0,tcfVendorConfigurations:!0,customizeBanner:!0},onFinish:m}),React.createElement(R.Z.Item,{label:(0,o.__)("Content to export")},React.createElement("div",null,React.createElement(R.Z.Item,{name:"settings",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("Settings")))),React.createElement("div",null,React.createElement(R.Z.Item,{name:"cookieGroups",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("Service groups")))),React.createElement("div",null,React.createElement(R.Z.Item,{name:"cookies",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("Services")))),React.createElement("div",null,React.createElement(R.Z.Item,{name:"blocker",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("Content Blocker")))),e&&React.createElement("div",null,React.createElement(R.Z.Item,{name:"tcfVendorConfigurations",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("TCF Vendor configurations")))),React.createElement("div",null,React.createElement(R.Z.Item,{name:"customizeBanner",noStyle:!0,valuePropName:"checked"},React.createElement(P.Z,null,(0,o.__)("Cookie banner customization"))))),React.createElement(R.Z.Item,null,React.createElement("input",{type:"submit",className:"button button-primary",style:{marginTop:10},value:(0,o.__)("Export")}),React.createElement("input",{onClick:_,type:"submit",className:"button",style:{margin:"10px 0 0 10px"},value:(0,o.__)("Download JSON")}),t.length>0&&React.createElement("div",{className:"notice notice-info inline below-h2 notice-alt",style:{margin:"10px 0 0 0"}},React.createElement("p",null,(0,x.E)(t.join("\n\n"))))),React.createElement(R.Z.Item,{style:{display:r?"block":"none"}},React.createElement(R.Z.Item,{noStyle:!0},React.createElement(Z.Z,{style:{marginTop:0}},(0,o.__)("Result")),React.createElement(d.Z.TextArea,{onClick:u,value:r,readOnly:!0,rows:5})),React.createElement("p",{className:"description"},(0,o.__)('Copy the exported content and paste it into the "Import" text area of your target WordPress installation.')))))}));var D=a(6710),N=a(8083),Y=a(8488),V=a.n(Y);const B={labelCol:{span:24},wrapperCol:{span:24}},T=(0,c.Pi)((()=>{const[e]=R.Z.useForm(),[t,a]=(0,k.useState)(!1),[n,l]=(0,k.useState)(!1),r=(0,k.useCallback)((()=>{(async()=>{a(!0),l(!0);const{uuid:t,date:n}=e.getFieldsValue(),r=(0,g.Y)({location:N.Q,params:{uuid:t||"",from:(null==n?void 0:n[0].format("YYYY-MM-DD"))||"",to:(null==n?void 0:n[1].format("YYYY-MM-DD"))||""}});window.open(r,"_blank"),a(!1)})()}),[a,l,e]);return React.createElement(s.Z,{spinning:t},React.createElement(R.Z,(0,i.Z)({name:"export",form:e},B,{initialValues:{by:"",date:[],uuid:""},onFinish:r}),React.createElement(R.Z.Item,{label:(0,o.__)("Export by"),required:!0},React.createElement(R.Z.Item,{name:"by",noStyle:!0,rules:[{required:!0,message:(0,o.__)("Please select an option!")}]},React.createElement(m.ZP.Group,null,React.createElement(m.ZP.Button,{value:"date"},(0,o.__)("Date range")),React.createElement(m.ZP.Button,{value:"uuid"},(0,o.__)("UUID"))))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.by!==t.by},(({getFieldValue:e})=>"date"===e("by")&&React.createElement(R.Z.Item,{name:"date",label:(0,o.__)("Date range"),required:!0,rules:[{type:"array",required:!0,message:(0,o.__)("Please provide a valid date range!")}]},React.createElement(D.D,{disabledDate:e=>!e||e.isAfter(V()())})))),React.createElement(R.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.by!==t.by},(({getFieldValue:e})=>"uuid"===e("by")&&React.createElement(R.Z.Item,{name:"uuid",label:(0,o.__)("UUID"),required:!0,rules:[{required:!0,pattern:/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/,message:(0,o.__)("Please provide a valid UUID!")}]},React.createElement(d.Z,null)))),React.createElement(R.Z.Item,null,React.createElement("input",{type:"submit",className:"button button-primary",style:{marginTop:10},value:(0,o.__)("Download CSV")})),n&&React.createElement("div",{className:"notice notice-info inline below-h2 notice-alt",style:{margin:"10px 0 0 0"}},React.createElement("p",null,(0,o.__)("The CSV file can be very large because data in this format is redundant per line. In your WordPress database the consents are much smaller.")))))})),j=(0,c.Pi)((()=>React.createElement(n.Z,null,React.createElement(l.Z,{xl:16,sm:16,xs:24},React.createElement(r.Z,{style:{margin:10},title:(0,o.__)("Import")},React.createElement(S,null))),React.createElement(l.Z,{xl:8,sm:8,xs:24},React.createElement(r.Z,{style:{margin:10},title:(0,o.__)("Export")},React.createElement(w,null)),React.createElement(r.Z,{style:{margin:10},title:(0,o.__)("Export consents")},React.createElement(T,null))))))},6710:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(4741),l=a(6914),r=a(6340),c=a(8488),o=a.n(c);const{RangePicker:s}=l.Z,i=e=>{const t=o().localeData();return React.createElement(s,(0,n.Z)({locale:{lang:{locale:o().locale(),placeholder:(0,r.__)("Select date"),rangePlaceholder:[(0,r.__)("Start date"),(0,r.__)("End date")],today:(0,r.__)("Today"),now:(0,r.__)("Now"),backToToday:(0,r.__)("Back to today"),ok:(0,r.__)("OK"),clear:(0,r.__)("Clear"),month:(0,r.__)("Month"),year:(0,r.__)("Year"),timeSelect:(0,r.__)("Select time"),dateSelect:(0,r.__)("Select date"),monthSelect:(0,r.__)("Choose a month"),yearSelect:(0,r.__)("Choose a year"),decadeSelect:(0,r.__)("Choose a decade"),yearFormat:"YYYY",dateFormat:t.longDateFormat("LL"),dayFormat:"D",dateTimeFormat:t.longDateFormat("LLL"),monthFormat:"MMMM",monthBeforeYear:!0,previousMonth:(0,r.__)("Previous month (PageUp)"),nextMonth:(0,r.__)("Next month (PageDown)"),previousYear:(0,r.__)("Last year (Control + left)"),nextYear:(0,r.__)("Next year (Control + right)"),previousDecade:(0,r.__)("Last decade"),nextDecade:(0,r.__)("Next decade"),previousCentury:(0,r.__)("Last century"),nextCentury:(0,r.__)("Next century")},timePickerLocale:{placeholder:(0,r.__)("Select time")},dateFormat:t.longDateFormat("LL"),dateTimeFormat:t.longDateFormat("LLL"),weekFormat:"YYYY-wo",monthFormat:"YYYY-MM"}},e))}}}]);
//# sourceMappingURL=chunk-config-tab-import.pro.js.map?ver=0456174d2ec25b74f395